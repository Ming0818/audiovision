<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>AudioVision</title>
    <link rel="icon" href="./img/icon.png">

    <!-- Bootstrap core CSS -->
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../iconfont/material-icons.css" rel="stylesheet">

    <!-- Custom styles -->
    <link href="style.css" rel="stylesheet">

    <!-- AudioVision scripts -->
    <script src="script.js"></script>

    <!-- RNNoise scripts -->
    <script src="./rnn_js/ffmap.js"></script>
    <script src="./rnn_js/noise.js"></script>
    <script src="./rnn_js/record.js"></script>
  </head>
  
  <body class="bg-light">
  <nav class="navbar navbar-expand navbar-dark bg-dark fixed-top">
    <a class="navbar-brand mr-auto mr-lg-0" href="#"><i class="material-icons" style="vertical-align: bottom; padding-bottom: 3px">record_voice_over</i> Audio<b>Vision &nbsp;</b></a>
    <i class="mr-lg-0 mr-auto text-muted d-none d-lg-block">Real-time Speech Separation, Noise Suppression & Speaker Recognition</i>
    <div class="navbar-collapse offcanvas-collapse" id="navbarsExampleDefault">
      <ul class="navbar-nav mr-auto">
      </ul>
        <img src="./img/polytechnique.png" height="40" width="auto" class="d-none d-lg-block">
    </div>
</nav>

<main role="main" class="container">
  <div class="row">
    <div class="col-md-auto">
      <div class="my-3 p-3 bg-white rounded shadow-sm">
      <h6 class="border-bottom border-gray pb-2 mb-0">Speech Separation</h6>
          <svg id="mic_array_shape" width="220" height="210">
            <rect x="35" y="40" rx="20" ry="20" width="150" height="150" style="fill:none;stroke:black;stroke-width:3;opacity:0.7" />
              <!-- Mark relevant points -->
            <g stroke="black" stroke-width="3" fill="black" style="opacity:0.4">
              <circle cx="55" cy="60" r="3" />
              <circle cx="165" cy="60" r="3" />
              <circle cx="55" cy="170" r="3" />
              <circle cx="165" cy="170" r="3" />
            </g>
            <!-- Label the points -->
            <g font-size="20" stroke="none" text-anchor="middle">
              <text id="mic_0" 	class="text-secondary" x="25" y="35" font-size="16">mic_0</text>
              <text id="mic_1" class="text-secondary" x="195" y="35" font-size="16">mic_1</text>
              <text  id="mic_2" class="text-secondary" x="25" y="205" font-size="16">mic_2</text>
              <text id="mic_3" class="text-secondary" x="195" y="205" font-size="16">mic_3</text>
            </g>
            Sorry, your browser does not support inline SVG.
          </svg>
          <p id="prediction"></p>
        </div>
    </div>
    <div class="col-md">
        <div class="my-3 p-3 bg-white rounded shadow-sm">
            <h6 class="border-bottom border-gray pb-2 mb-0">Noise Suppression</h6>

            <div class="form-check form-check-inline">
              <input class="form-check-input" type="radio" name="inlineRadioOptions" onclick="liveNoiseSuppression(0, this);" id="default_live_noise_suppression" checked="">
              <label class="form-check-label" for="inlineRadio2">Off</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="inlineRadioOptions" onclick="liveNoiseSuppression(2, this); showClearSpec()">
                <label class="form-check-label" for="inlineRadio1">Noise Suppression</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="inlineRadioOptions" onclick="liveNoiseSuppression(1, this); showOriginSpec()">
                <label class="form-check-label" for="inlineRadio1">Without Suppression</label>
            </div>

            <canvas id="source_spectrogram" class="rounded" width="16" height="16" style="display: none"></canvas>
            <canvas id="destination_spectrogram" class="rounded" width="16" height="16" style="display: none"></canvas>
        </div>
        <div class="my-3 p-3 bg-white rounded shadow-sm">
          <div class="row">
            <div class="col">
                <h6 class="border-bottom border-gray pb-2 mb-0"><i>Distinct</i>Voice <i class="material-icons" style="vertical-align: bottom;">people</i><a href=# onclick="resetCounter()" class="float-right text-secondary spinEffect"><i class="material-icons" style="vertical-align: bottom;">refresh</i></a></h6>
            </div>
          </div>
            <div id="buffer_div"></div>
        </div>
    </div>
  </div>
</main>

<footer class="footer mt-auto py-3 fixed-bottom" style="background-color: #f5f5f5;">
  <div class="container">
    <span class="text-muted">Â© 2019 Jad Feghali | Polytechnique Montreal | <a href="#" class="text-secondary"><u>Source</u></a></span>
  </div>
</footer>

</body>
</html>
